package com.cn.xi.action;

import java.io.File;
import java.util.UUID;

import org.apache.struts2.ServletActionContext;

import com.cn.xi.service.PicService;
import com.opensymphony.xwork2.Action;

public class AddPicProAction implements Action {
	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	// 每一个文件上传域，需要三个Field进行上传
	private File pic;// 上传文件的本身
	private String picFileName;// 上传文件的文件名
	private String picContentType;// 上传文件的文件类型

	public File getPic() {
		return pic;
	}

	public void setPic(File pic) {
		this.pic = pic;
	}

	public String getPicFileName() {
		return picFileName;
	}

	public void setPicFileName(String picFileName) {
		this.picFileName = picFileName;
	}

	public String getPicContentType() {
		return picContentType;
	}

	public void setPicContentType(String picContentType) {
		this.picContentType = picContentType;
	}
	
	@Override
	public String execute() throws Exception {
		//由于此处的pic是我们的文件，因此此处只需要IO流将文件写入磁盘就行
		String uploadPath = ServletActionContext.getServletContext().getRealPath("/upload");
		String newFileName = UUID.randomUUID().toString() + picFileName.substring(picFileName.lastIndexOf("."));
		System.out.println("-------------------------------------------------");
		System.out.println(uploadPath + "/" + newFileName);
		System.out.println("-------------------------------------------------");
		PicService ps = new PicService();
//		ps.add();
		return SUCCESS;
	}

}
